<?xml version="1.0" encoding="utf-8" ?>
<content type="ActionForm" version="03.09.32">
  <ActionForm>
    <Description> نمونه فرم ساده, از پیش طراحی شده درگاه سامان کیش </Description>
    <Fields>
      <Field>
        <Id><![CDATA[11]]></Id>
        <Title><![CDATA[نام و نام خانوادگی]]></Title>
        <TitleTokenized><![CDATA[نام و نام خانوادگی]]></TitleTokenized>
        <ShortDescTokenized><![CDATA[]]></ShortDescTokenized>
        <OverrideName>txtName</OverrideName>
        <Name>txtName</Name>
        <ShortDesc><![CDATA[]]></ShortDesc>
        <HelpText><![CDATA[]]></HelpText>
        <ShowCondition><![CDATA[]]></ShowCondition>
        <ValidationCondition><![CDATA[]]></ValidationCondition>
        <CanValidate><![CDATA[True]]></CanValidate>
        <BindShow><![CDATA[]]></BindShow>
        <BindPreserveLayout><![CDATA[False]]></BindPreserveLayout>
        <BindValue><![CDATA[]]></BindValue>
        <BindOnChange><![CDATA[]]></BindOnChange>
        <InputType>open-text</InputType>
        <InputData>{"Value":"","AutocompleteUrl":"","Mask":"","MaxLength":"","SaveToReport":true,"Readonly":false,"AllowTokens":""}</InputData>
        <AutocompleteUrl />
        <Mask />
        <MaxLength />
        <SaveToReport>True</SaveToReport>
        <Readonly>False</Readonly>
        <AllowTokens />
        <Value><![CDATA[]]></Value>
        <IsRequired>False</IsRequired>
        <IsActive>True</IsActive>
        <IsEnabled>True</IsEnabled>
        <EnableCondition />
        <CssClass><![CDATA[]]></CssClass>
        <CssStyles><![CDATA[]]></CssStyles>
        <LabelCssClass><![CDATA[]]></LabelCssClass>
        <LabelCssStyles><![CDATA[]]></LabelCssStyles>
        <CustomValidator1 />
        <CustomValidator2 />
        <ValidationGroup />
        <GroupValidator />
        <SaveToUserProfile>False</SaveToUserProfile>
        <DisableAutocomplete>False</DisableAutocomplete>
        <ViewOrder>0</ViewOrder>
        <RowIndex>0</RowIndex>
        <ColSpan>6</ColSpan>
        <ColOffset>6</ColOffset>
      </Field>
      <Field>
        <Id><![CDATA[12]]></Id>
        <Title><![CDATA[مبلغ پرداختی]]></Title>
        <TitleTokenized><![CDATA[مبلغ پرداختی]]></TitleTokenized>
        <ShortDescTokenized><![CDATA[]]></ShortDescTokenized>
        <OverrideName>txtPrice</OverrideName>
        <Name>txtPrice</Name>
        <ShortDesc><![CDATA[]]></ShortDesc>
        <HelpText><![CDATA[]]></HelpText>
        <ShowCondition><![CDATA[]]></ShowCondition>
        <ValidationCondition><![CDATA[]]></ValidationCondition>
        <CanValidate><![CDATA[True]]></CanValidate>
        <BindShow><![CDATA[]]></BindShow>
        <BindPreserveLayout><![CDATA[False]]></BindPreserveLayout>
        <BindValue><![CDATA[]]></BindValue>
        <BindOnChange><![CDATA[]]></BindOnChange>
        <InputType>open-text</InputType>
        <InputData>{"Value":"","SaveToReport":true,"AutocompleteUrl":"","Mask":"","MaxLength":"","Readonly":false,"AllowTokens":""}</InputData>
        <SaveToReport>True</SaveToReport>
        <AutocompleteUrl />
        <Mask />
        <MaxLength />
        <Readonly>False</Readonly>
        <AllowTokens />
        <Value><![CDATA[]]></Value>
        <IsRequired>False</IsRequired>
        <IsActive>True</IsActive>
        <IsEnabled>True</IsEnabled>
        <EnableCondition />
        <CssClass><![CDATA[]]></CssClass>
        <CssStyles><![CDATA[]]></CssStyles>
        <LabelCssClass><![CDATA[]]></LabelCssClass>
        <LabelCssStyles><![CDATA[]]></LabelCssStyles>
        <CustomValidator1 />
        <CustomValidator2 />
        <ValidationGroup />
        <GroupValidator />
        <SaveToUserProfile>False</SaveToUserProfile>
        <DisableAutocomplete>False</DisableAutocomplete>
        <ViewOrder>1</ViewOrder>
        <RowIndex>1</RowIndex>
        <ColSpan>6</ColSpan>
        <ColOffset>6</ColOffset>
      </Field>
      <Field>
        <Id><![CDATA[13]]></Id>
        <Title><![CDATA[پرداخت]]></Title>
        <TitleTokenized><![CDATA[پرداخت]]></TitleTokenized>
        <ShortDescTokenized><![CDATA[]]></ShortDescTokenized>
        <OverrideName>btnPay</OverrideName>
        <Name>btnPay</Name>
        <ShortDesc><![CDATA[]]></ShortDesc>
        <HelpText><![CDATA[]]></HelpText>
        <ShowCondition><![CDATA[]]></ShowCondition>
        <ValidationCondition><![CDATA[]]></ValidationCondition>
        <CanValidate><![CDATA[True]]></CanValidate>
        <BindShow><![CDATA[]]></BindShow>
        <BindPreserveLayout><![CDATA[False]]></BindPreserveLayout>
        <BindValue><![CDATA[]]></BindValue>
        <BindOnChange><![CDATA[]]></BindOnChange>
        <InputType>button</InputType>
        <InputData>{"CausesValidation":true,"IsDefaultButton":true,"ButtonSize":{"Expression":"","Value":"btn-normal","IsExpression":false,"Parameters":{}},"ButtonType":{"Expression":"","Value":"btn-info","IsExpression":false,"Parameters":{}},"ButtonAlign":{"Expression":"","Value":"left","IsExpression":false,"Parameters":{}},"Actions":[],"ButtonIcon":""}</InputData>
        <CausesValidation>True</CausesValidation>
        <IsDefaultButton>True</IsDefaultButton>
        <ButtonSize>
          <Expression />
          <Value>btn-normal</Value>
          <IsExpression>False</IsExpression>
          <Parameters>System.Collections.Generic.Dictionary`2[System.String,System.Object]</Parameters>
        </ButtonSize>
        <ButtonType>
          <Expression />
          <Value>btn-info</Value>
          <IsExpression>False</IsExpression>
          <Parameters>System.Collections.Generic.Dictionary`2[System.String,System.Object]</Parameters>
        </ButtonType>
        <ButtonAlign>
          <Expression />
          <Value>left</Value>
          <IsExpression>False</IsExpression>
          <Parameters>System.Collections.Generic.Dictionary`2[System.String,System.Object]</Parameters>
        </ButtonAlign>
        <Actions />
        <ButtonIcon />
        <Value><![CDATA[]]></Value>
        <IsRequired>False</IsRequired>
        <IsActive>True</IsActive>
        <IsEnabled>True</IsEnabled>
        <EnableCondition />
        <CssClass><![CDATA[]]></CssClass>
        <CssStyles><![CDATA[]]></CssStyles>
        <LabelCssClass><![CDATA[]]></LabelCssClass>
        <LabelCssStyles><![CDATA[]]></LabelCssStyles>
        <CustomValidator1 />
        <CustomValidator2 />
        <ValidationGroup />
        <GroupValidator />
        <SaveToUserProfile>False</SaveToUserProfile>
        <DisableAutocomplete>False</DisableAutocomplete>
        <ViewOrder>2</ViewOrder>
        <RowIndex>2</RowIndex>
        <ColSpan>6</ColSpan>
        <ColOffset>6</ColOffset>
      </Field>
      <Field>
        <Id><![CDATA[14]]></Id>
        <Title><![CDATA[txtOrderID]]></Title>
        <TitleTokenized><![CDATA[txtOrderID]]></TitleTokenized>
        <ShortDescTokenized><![CDATA[]]></ShortDescTokenized>
        <OverrideName />
        <Name>txtOrderID</Name>
        <ShortDesc><![CDATA[]]></ShortDesc>
        <HelpText><![CDATA[]]></HelpText>
        <ShowCondition><![CDATA[]]></ShowCondition>
        <ValidationCondition><![CDATA[]]></ValidationCondition>
        <CanValidate><![CDATA[True]]></CanValidate>
        <BindShow><![CDATA[]]></BindShow>
        <BindPreserveLayout><![CDATA[False]]></BindPreserveLayout>
        <BindValue><![CDATA[]]></BindValue>
        <BindOnChange><![CDATA[]]></BindOnChange>
        <InputType>hiden-constant</InputType>
        <InputData>{"Value":"[DateTime:Now|yMMddhhmmss]","SaveToReport":true}</InputData>
        <SaveToReport>True</SaveToReport>
        <Value><![CDATA[960627095436]]></Value>
        <IsRequired>False</IsRequired>
        <IsActive>True</IsActive>
        <IsEnabled>True</IsEnabled>
        <EnableCondition />
        <CssClass><![CDATA[]]></CssClass>
        <CssStyles><![CDATA[]]></CssStyles>
        <LabelCssClass><![CDATA[]]></LabelCssClass>
        <LabelCssStyles><![CDATA[]]></LabelCssStyles>
        <CustomValidator1 />
        <CustomValidator2 />
        <ValidationGroup />
        <GroupValidator />
        <SaveToUserProfile>False</SaveToUserProfile>
        <DisableAutocomplete>False</DisableAutocomplete>
        <ViewOrder>3</ViewOrder>
        <RowIndex>3</RowIndex>
        <ColSpan>12</ColSpan>
        <ColOffset>0</ColOffset>
      </Field>
      <Field>
        <Id><![CDATA[15]]></Id>
        <Title><![CDATA[txtStatus]]></Title>
        <TitleTokenized><![CDATA[txtStatus]]></TitleTokenized>
        <ShortDescTokenized><![CDATA[]]></ShortDescTokenized>
        <OverrideName />
        <Name>txtStatus</Name>
        <ShortDesc><![CDATA[]]></ShortDesc>
        <HelpText><![CDATA[]]></HelpText>
        <ShowCondition><![CDATA[]]></ShowCondition>
        <ValidationCondition><![CDATA[]]></ValidationCondition>
        <CanValidate><![CDATA[True]]></CanValidate>
        <BindShow><![CDATA[]]></BindShow>
        <BindPreserveLayout><![CDATA[False]]></BindPreserveLayout>
        <BindValue><![CDATA[]]></BindValue>
        <BindOnChange><![CDATA[]]></BindOnChange>
        <InputType>hiden-constant</InputType>
        <InputData>{"Value":"","SaveToReport":true}</InputData>
        <SaveToReport>True</SaveToReport>
        <Value><![CDATA[]]></Value>
        <IsRequired>False</IsRequired>
        <IsActive>True</IsActive>
        <IsEnabled>True</IsEnabled>
        <EnableCondition />
        <CssClass><![CDATA[]]></CssClass>
        <CssStyles><![CDATA[]]></CssStyles>
        <LabelCssClass><![CDATA[]]></LabelCssClass>
        <LabelCssStyles><![CDATA[]]></LabelCssStyles>
        <CustomValidator1 />
        <CustomValidator2 />
        <ValidationGroup />
        <GroupValidator />
        <SaveToUserProfile>False</SaveToUserProfile>
        <DisableAutocomplete>False</DisableAutocomplete>
        <ViewOrder>4</ViewOrder>
        <RowIndex>4</RowIndex>
        <ColSpan>12</ColSpan>
        <ColOffset>0</ColOffset>
      </Field>
    </Fields>
    <Settings>
      <Title>avt.Action Form</Title>
      <CssName>avt-action-form</CssName>
      <Version>3.9.0</Version>
      <Build>3.9.323</Build>
      <CultureCode>fa</CultureCode>
      <RenderContext>Form</RenderContext>
      <FrontEndTemplate>&lt;div&gt;&lt;span&gt;&lt;a href="[FormUrl]"&gt;Click here to change.&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;</FrontEndTemplate>
      <HasCustomLayout>False</HasCustomLayout>
      <ShowLoading>False</ShowLoading>
      <TabsProLoading>False</TabsProLoading>
      <LayoutHtml>
        <![CDATA[<div style="width: 40%; float: left; margin: 0px 20px 0px 0px;">[Fields:NewField]</div>
<div style="width: 40%; float: left; margin: 0px 20px 0px 0px;">[Fields:NewField]</div>
<div style="clear: both;"></div>
<div style="clear: both;"></div>
<div style="margin: 0px 20px 0px 0px; text-align: center;">[Buttons:Submit] [Buttons:Cancel]</div>]]>
      </LayoutHtml>
      <CurrentContext>ExportImport</CurrentContext>
      <LabelAlign>inside</LabelAlign>
      <LabelWidth>3</LabelWidth>
      <FieldSpacing>normal</FieldSpacing>
      <OpenFormMode>Always</OpenFormMode>
      <ModuleId>426</ModuleId>
      <ModuleVersion>3.9.323</ModuleVersion>
      <TabId>90</TabId>
      <ModuleBaseUrl>/DesktopModules/DnnSharp/ActionForm</ModuleBaseUrl>
      <DnnEditorUrl>http://localhost:2030/tabid/90/ctl/DnnTextEditor/mid/426/popUp/true/Default.aspx?skinsrc=[G]Skins/_default/No Skin&amp;containersrc=[G]Containers/_default/No Container</DnnEditorUrl>
      <ResourceBaseUrl>/DesktopModules/DnnSharp/ActionForm/static</ResourceBaseUrl>
      <FormTemplate>material</FormTemplate>
      <FormTemplateFolder>/DesktopModules/DnnSharp/ActionForm/templates/Form/material</FormTemplateFolder>
      <UploadUrl>/DesktopModules/DnnSharp/ActionForm/UploadFile.ashx?ctl=ExportModule&amp;moduleid=426&amp;ReturnURL=/ShopLocator&amp;popUp=true&amp;language=fa-IR&amp;_alias=localhost:2030&amp;_mid=426&amp;_tabid=90</UploadUrl>
      <ModuleId>426</ModuleId>
      <IsDebug>False</IsDebug>
      <ClientSideValidation>True</ClientSideValidation>
      <ShowTooltips>False</ShowTooltips>
      <ShowTooltipTitle>True</ShowTooltipTitle>
      <ShowFormCondition />
      <LeftSidebarHtml />
      <RightSidebarHtml />
      <InitJs><![CDATA[]]></InitJs>
      <PopupWidth>400</PopupWidth>
      <PopupName />
      <PopupHeight>300</PopupHeight>
      <jQueryTheme>sunny</jQueryTheme>
      <IncludeBootstrap>True</IncludeBootstrap>
      <AngularnoConflict>True</AngularnoConflict>
      <Background />
      <TextColor />
      <RootClasses />
      <Padding>0</Padding>
      <DateFormat>yy/mm/dd</DateFormat>
      <BaseId>dnn426</BaseId>
      <AjaxSubmitUrl>/DesktopModules/DnnSharp/ActionForm/Submit.ashx?ctl=ExportModule&amp;moduleid=426&amp;ReturnURL=/ShopLocator&amp;popUp=true&amp;language=fa-IR&amp;_alias=localhost:2030&amp;_mid=426&amp;_tabid=90</AjaxSubmitUrl>
      <PageUrl>http://localhost:2030/tabid/90/Default.aspx</PageUrl>
      <LocalizedStringsUrl>/DesktopModules/DnnSharp/ActionForm/AdminApi.ashx?method=GetLocalization&amp;locale=fa-IR&amp;section=FrontEnd</LocalizedStringsUrl>
      <PortalHomeUrl>/Portals/0/</PortalHomeUrl>
    </Settings>
    <Actions xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <ActionInfo>
        <IsDeleted>false</IsDeleted>
        <Description>برای اتصال کاربر به درگاه سامان</Description>
        <ActionType>SendSaman</ActionType>
        <OrderIndex>0</OrderIndex>
        <LastModified>2017-09-18T21:24:47.63</LastModified>
        <LastModifiedBy>1</LastModifiedBy>
        <ActionData>{"MerchantId":"2765","RedirectURL":"[_EditUrl]","OrderId":"[txtOrderID]","Amount":"[txtPrice]"}</ActionData>
        <ModuleId>426</ModuleId>
        <FieldName>btnPay</FieldName>
        <EventName>click</EventName>
      </ActionInfo>
      <ActionInfo>
        <IsDeleted>false</IsDeleted>
        <Description>بعد انجام تراکنش و برگشت به سایت ، شماره فاکتور تبدیل به توکن شده و میتوانید با روش دلخواه خودتان بررسی کنید که چنین فاکتوری صادر شده است!</Description>
        <ActionType>StartCallBackSaman</ActionType>
        <OrderIndex>0</OrderIndex>
        <LastModified>2017-09-18T21:24:47.63</LastModified>
        <LastModifiedBy>1</LastModifiedBy>
        <ActionData>{}</ActionData>
        <ModuleId>426</ModuleId>
        <EventName>init</EventName>
      </ActionInfo>
      <ActionInfo>
        <IsDeleted>false</IsDeleted>
        <Description>بعد انجام تراکنش و برگشت به سایت ، این اکشن اجرا شده و نتیجه تراکنش در توکن های پیش فرض ذخیره می شود</Description>
        <ActionType>CallBackSaman</ActionType>
        <OrderIndex>1</OrderIndex>
        <Condition />
        <LastModified>2017-09-18T21:24:47.63</LastModified>
        <LastModifiedBy>1</LastModifiedBy>
        <ActionData>{"Username":"","Password":"","OrderId":"","OnSuccessful":[{"Id":-1,"$_uid":"action15057536831408477","Parameters":{"Data":[{"name":"txtStatus","value":"[SamanMessage]"}]},"ActionType":"InjectData","$_isOpen":false,"$_isLoaded":true,"$_isFocus":true,"Definition":{"IsClientAction":false},"Description":"در صورتی که پرداخت انجام شده و خطایی نداشته باشه ، مقدار فیلد txtStatus تغییر خواهد کرد"},{"Id":-1,"$_uid":"action15057536831403471","Parameters":{},"ActionType":"SaveReportDb","$_isOpen":false,"$_isLoaded":true,"$_isFocus":true,"Definition":{"IsClientAction":false},"Description":"در صورتی که پرداخت انجام شده و خطایی نداشته باشه ، فرم ذخیره خواهد شد."},{"Id":-1,"$_uid":"action15057536831405902","Parameters":{"Message":"&lt;br&gt;&lt;p&gt;[Error] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[TRACENO]&lt;/p&gt;&lt;p&gt;[Successful]&lt;/p&gt;&lt;p&gt;[StateCode] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[State] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[SecurePan] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[RRN] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[ResNum] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[RefNum] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[MID] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[SamanMessage] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[CID] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[Amount]&lt;br&gt;&lt;/p&gt;&lt;p&gt;[IsCallBack] &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;&lt;!--EndFragment--&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;","ButtonsList":{"Expression":"","Value":[],"IsExpression":false}},"ActionType":"ShowMessage","$_isOpen":false,"$_isLoaded":true,"$_isFocus":true,"Definition":{"IsClientAction":false}}],"OnCanceled":[{"Id":-1,"$_uid":"action15057536832174936","Parameters":{"Message":"&lt;br&gt;&lt;p&gt;[Error] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[TRACENO]&lt;/p&gt;&lt;p&gt;[Successful]&lt;/p&gt;&lt;p&gt;[StateCode] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[State] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[SecurePan] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[RRN] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[ResNum] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[RefNum] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[MID] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[SamanMessage] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[CID] &lt;br&gt;&lt;/p&gt;&lt;p&gt;[Amount]&lt;br&gt;&lt;/p&gt;&lt;p&gt;[IsCallBack] &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;&lt;!--EndFragment--&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;","ButtonsList":{"Expression":"","Value":[],"IsExpression":false}},"ActionType":"ShowMessage","$_isOpen":false,"$_isLoaded":true,"$_isFocus":true,"Definition":{"IsClientAction":false}}],"OnInvalid":[],"OnError":[],"Price":""}</ActionData>
        <ModuleId>426</ModuleId>
        <EventName>init</EventName>
      </ActionInfo>
      <ActionInfo>
        <IsDeleted>false</IsDeleted>
        <Description>در صورتی که خطایی وجود نداشته باشد به درگاه سامان وصل می شود</Description>
        <ActionType>ShowMessage</ActionType>
        <OrderIndex>1</OrderIndex>
        <LastModified>2017-09-18T21:24:47.63</LastModified>
        <LastModifiedBy>1</LastModifiedBy>
        <ActionData>{"Message":"&lt;p&gt;[PostForm]&lt;br&gt;&lt;/p&gt;","ButtonsList":{"Expression":"","Value":[],"IsExpression":false}}</ActionData>
        <ModuleId>426</ModuleId>
        <FieldName>btnPay</FieldName>
        <EventName>click</EventName>
      </ActionInfo>
    </Actions>
  </ActionForm>
</content>
 