!function (t) { t.module("ui.bootstrap.contextMenu", []).service("CustomService", function () { "use strict"; return { initialize: function (t) { console.log("got here", t) } } }).directive("contextMenu", ["$parse", "$q", "CustomService", "$sce", function (e, n, o, i) { var a = [], r = null, c = function (t) { for (; a.length && (!t || a.length > t);)a.pop().remove(); 0 == a.length && r && r.remove() }, l = function (e, o, i, a, r, c, l, u, f, d) { "use strict"; var p = t.isArray(a[1]) || a[1] && t.isFunction(a[1].then) ? a[1] : t.isArray(a[2]) || a[2] && t.isFunction(a[2].then) ? a[2] : t.isArray(a[3]) || a[3] && t.isFunction(a[3].then) ? a[3] : null, h = "New Item"; "function" == typeof a[0] || "string" == typeof a[0] || void 0 !== a.text ? h = function (t, e, o, i, a, r, c, l) { var s = l("<a>"); s.css("padding-right", "8px"), s.attr({ tabindex: "-1", href: "#" }), "string" == typeof e[0] ? o = e[0] : "function" == typeof e[0] ? o = e[0].call(t, t, i, a) : void 0 !== e.text && (o = e.text); var u = n.when(o); return r.push(u), u.then(function (t) { c && (s.css("cursor", "default"), s.append(l('<strong style="font-family:monospace;font-weight:bold;float:right;">&gt;</strong>'))), s.append(t) }), s }(e, a, h, o, i, l, p, f) : "function" == typeof a.html ? h = a.html(e) : void 0 !== a.html && (h = a.html), c.append(h); s(e, void 0 !== a.enabled ? a.enabled.call(e, e, o, i, h) : "function" != typeof a[2] || a[2].call(e, e, o, i, h), a, r, c, p, i, h, o, f, d) }, s = function (e, o, i, a, r, l, s, f, d, p, h) { if (o) { var g = function (t) { c(h + 1); var o = { pageX: d.pageX + a[0].offsetWidth - 1, pageY: a[0].offsetTop + r[0].offsetTop - 3, view: d.view || window }; n.when(l).then(function (t) { u(e, o, t, s, h + 1) }) }; r.on("click", function (n) { n.preventDefault(), e.$apply(function () { l ? g() : (p(d.currentTarget).removeClass("context"), c(), t.isFunction(i[1]) ? i[1].call(e, e, d, s, f) : i.click.call(e, e, d, s, f)) }) }), r.on("mouseover", function (t) { e.$apply(function () { l && g() }) }) } else r.on("click", function (t) { t.preventDefault() }), r.addClass("disabled") }, u = function (e, i, s, u, f, d) { if (f || (f = 0), !p) var p = t.element; p(i.currentTarget).addClass("context"); var h = p("<div>"); r ? h = r : (r = h, h.addClass("angular-bootstrap-contextmenu dropdown clearfix")), d && h.addClass(d); var g = p("<ul>"); g.addClass("dropdown-menu"), g.attr({ role: "menu" }), g.css({ display: "block", position: "absolute", left: i.pageX + "px", top: i.pageY + "px", "z-index": 1e4 }); var v = []; t.forEach(s, function (t) { var n = p("<li>"); null === t ? n.addClass("divider") : "object" == typeof t[0] ? o.initialize(n, t) : l(e, i, u, t, g, n, v, 0, p, f), g.append(n) }), h.append(g); var m = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight); h.css({ width: "100%", height: m + "px", position: "absolute", top: 0, left: 0, zIndex: 9999, "max-height": window.innerHeight - 3 }), p(document).find("body").append(h), function (e, o, i, a) { "use strict"; n.all(a).then(function () { var n = i.pageY, o = t.element(e[0]).prop("offsetHeight"), a = i.view.innerHeight; n > o && a - n < o ? n = i.pageY - o : a <= o ? (t.element(e[0]).css({ height: a - 5, "overflow-y": "scroll" }), n = 0) : a - n < o && (n < (s = 5) && (s = n), n = a - o - s); var r = i.pageX, c = t.element(e[0]).prop("offsetWidth"), l = i.view.innerWidth; if (r > c && l - r - 5 < c) r = l - c - 5; else if (l - r < c) { var s; r < 5 + (s = 5) && (s = r + 5), r = l - c - s - 5 } e.css({ display: "block", position: "absolute", left: r + "px", top: n + "px" }) }) }(g, 0, i, v), h.on("mousedown", function (t) { p(t.target).hasClass("dropdown") && (p(i.currentTarget).removeClass("context"), c()) }).on("contextmenu", function (t) { p(t.currentTarget).removeClass("context"), t.preventDefault(), c(f) }), e.$on("$destroy", function () { c() }), a.push(g) }; return function (t, e, n) { var o = "contextmenu"; n.contextMenuOn && "string" == typeof n.contextMenuOn && (o = n.contextMenuOn), e.on(o, function (o) { if (o.stopPropagation(), o.preventDefault(), ("ontouchstart" in window || navigator.maxTouchPoints) && "true" === e.attr("draggable")) return !1; t.$apply(function () { var e = t.$eval(n.contextMenu), i = n.contextMenuClass, a = t.$eval(n.model); if (!(e instanceof Array)) throw '"' + n.contextMenu + '" not an array'; 0 !== e.length && u(t, o, e, a, void 0, i) }) }) } }]) }(dnnsfAngular15);