var jqyoui=dnnsfAngular15.module("ngDragDrop",[]).service("ngDragDropService",["$timeout",function(n){this.callEventCallback=function(scope,callbackName,event,ui,dragModel,dropModel){if(callbackName){var args=[event,ui,dragModel,dropModel],match=callbackName.match(/^(.+)\((.+)\)$/);match!==null&&(callbackName=match[1],values=eval("["+match[0].replace(/^(.+)\(/,"").replace(/\)/,"")+"]"),args.push.apply(args,values));scope[callbackName].apply(scope,args)}};var t=this;this.invokeDrop=function(i,r,u,f,e){var h={},o={},l=null,v={},y={},a,s=null,c=r.scope(),p=i.scope();s=r.find("[jqyoui-draggable]:last");o=c.$eval(r.attr("jqyoui-droppable"))||[];h=p.$eval(i.attr("jqyoui-draggable"))||[];l=dnnsfAngular15.isArray(t.dragModel)?h.index:null;v=dnnsfAngular15.isArray(t.dragModel)?t.dragModel[l]:t.dragModel;y=dnnsfAngular15.isArray(a)&&o&&o.index!==undefined?a[o.index]:dnnsfAngular15.isArray(a)?{}:a;h.animate===!0?(this.move(i,s.length>0?s:r,null,"fast",o,null),this.move(s.length>0&&!o.multiple?s:[],i.parent("[jqyoui-droppable]"),jqyoui.startXY,"fast",o,function(){n(function(){i.css({position:"relative",left:"",top:""});s.css({position:"relative",left:"",top:""});this.mutateDroppable(c,o,h,e,v,l);this.callEventCallback(c,o.onDrop,u,f,t.dragModel,e)}.bind(this))}.bind(this))):n(function(){this.mutateDroppable(c,o,h,e,v,l);this.callEventCallback(c,o.onDrop,u,f,t.dragModel,e)}.bind(this))};this.move=function(n,t,i,r,u,f){if(n.length===0)return f&&window.setTimeout(function(){f()},300),!1;var e=n.offset(),o=t&&t.is(":visible");i===null&&t.length>0&&(t.attr("jqyoui-draggable")!==undefined&&t.attr("ng-model")!==undefined&&t.is(":visible")&&u&&u.multiple?(i=t.offset(),u.stack===!1?i.left+=t.outerWidth(!0):i.top+=t.outerHeight(!0)):(i=t.css({visibility:"hidden",display:"block"}).offset(),t.css({visibility:"",display:o?"":"none"})));n.css({position:"absolute","z-index":9999}).css(e).animate(i,r,function(){f&&f()})};this.mutateDroppable=function(n,i,r,u,f,e){u.$modelValue!=t.dragModel.$modelValue&&(dnnsfAngular15.isArray(u.$modelValue)?(i&&i.index>=0?u.$modelValue[i.index]=f:u.$modelValue.push(f),r&&r.placeholder===!0&&(u.$modelValue[u.$modelValue.length-1].jqyoui_pos=e)):r&&r.placeholder===!0&&(u.$modelValue.jqyoui_pos=e))}}]).directive("jqyouiDraggable",["ngDragDropService",function(n){return{require:["?jqyouiDroppable","?ngModel"],restrict:"A",link:function(t,i,r,u){var s=u[1],f,e,o=function(u){u?(f=t.$eval(i.attr("jqyoui-draggable"))||[],i.draggable({disabled:!1}).draggable(t.$eval(r.jqyouiOptions)||{}).draggable({start:function(i,r){e=$(this).css("z-index");$(this).css("z-index",99999);jqyoui.startXY=$(this).offset();n.dragModel=s;n.callEventCallback(t,f.onStart,i,r)},stop:function(i,r){$(this).css("z-index",e);n.callEventCallback(t,f.onStop,i,r)},drag:function(i,r){n.callEventCallback(t,f.onDrag,i,r)},helper:function(){return $('<div class="alert alert-warning" style="padding: 0 20px; z-index: 99999;">'+$(this).text()+"<\/div>")},cursorAt:{left:40,top:10}})):i.draggable({disabled:!0})};t.$watch(function(){return t.$eval(r.drag)},o);o()}}}]).directive("jqyouiDroppable",["ngDragDropService",function(n){return{restrict:"A",priority:1,require:"?ngModel",link:function(t,i,r,u){var e=u,f=function(u){u?i.droppable({disabled:!1}).droppable(t.$eval(r.jqyouiOptions)||{}).droppable({over:function(i,r){var u=t.$eval(dnnsfAngular15.element(this).attr("jqyoui-droppable"))||[];n.callEventCallback(t,u.onOver,i,r)},out:function(i,r){var u=t.$eval(dnnsfAngular15.element(this).attr("jqyoui-droppable"))||[];n.callEventCallback(t,u.onOut,i,r)},drop:function(t,i){n.invokeDrop(dnnsfAngular15.element(i.draggable),dnnsfAngular15.element(this),t,i,e)}}):i.droppable({disabled:!0})};t.$watch(function(){return t.$eval(r.drop)},f);f()}}}]);
//# sourceMappingURL=angular-dragdrop.min.js.map
